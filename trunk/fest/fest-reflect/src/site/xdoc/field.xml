<?xml version="1.0" encoding="UTF-8"?>
<document>

  <properties>
    <title>Accessing Fields</title>
  </properties>

  <body>
    <section name="Accessing Fields">
      <p>
        We will use an example to better understand FEST-Reflect's 
        <a href="http://martinfowler.com/bliki/FluentInterface.html" target="_blank">fluent interface</a> for 
        field access.
      </p>
      <p>  
        Let's assume we have a simple class <code class="code">Person</code> that defines the following field:
        <pre class="prettyprint">
<span class="kwd">class</span>&#160;<span class="typ">Person</span> {

  <span class="kwd">private</span>&#160;<span class="typ">String</span> name;

}</pre>
      </p>
      <p>
        The following sections compares field access using Java Reflection and FEST-Reflect. We will assume that
        we have the variable 'person' of type <code class="code">Person</code>. We are also going to assume the 
        following static import:
        <pre class="prettyprint">
<span class="kwd">import static</span> org.fest.reflect.core.Reflection.field;</pre>
      </p>

      <subsection name="Reading the value of a field">
        <p>
          Java Reflection:
          <pre class="prettyprint">
<span class="typ">Field</span> field = Person.<span class="kwd">class</span>.<span class="fnc">getField</span>(<span class="str">&quot;name&quot;</span>);

AccessController.<span class="fnc">doPrivileged</span>(<span class="kwd">new</span>&#160;<span class="fnc">PrivilegedAction</span>&lt;Void&gt;() {
  <span class="kwd">public</span> Void <span class="fnc">run</span>() {
    field.<span class="fnc">setAccessible</span>(<span class="kwd">true</span>);
    <span class="kwd">return null</span>;
  }
});    

<span class="typ">String</span> name = (String) field.<span class="fnc">get</span>(person);</pre>
        </p>
        <p>
          FEST-Reflect:
          <pre class="prettyprint">
<span class="typ">String</span> name = <span class="fnc">field</span>(<span class="str">&quot;name&quot;</span>).<span class="fnc">ofType</span>(String.<span class="kwd">class</span>)
                           .<span class="fnc">in</span>(person)
                           .<span class="fnc">get</span>();</pre>
        </p>
      </subsection>

      <subsection name="Setting the value of a field">
        <p>
          Java Reflection:
          <pre class="prettyprint">
<span class="typ">Field</span> field = Person.<span class="kwd">class</span>.<span class="fnc">getField</span>(<span class="str">&quot;name&quot;</span>);

AccessController.<span class="fnc">doPrivileged</span>(<span class="kwd">new</span>&#160;<span class="fnc">PrivilegedAction</span>&lt;Void&gt;() {
  <span class="kwd">public</span> Void <span class="fnc">run</span>() {
    field.<span class="fnc">setAccessible</span>(<span class="kwd">true</span>);
    <span class="kwd">return null</span>;
  }
});    

field.<span class="fnc">set</span>(person, <span class="str">&quot;Leia&quot;</span>);</pre>
        </p>
        <p>
          FEST-Reflect:
          <pre class="prettyprint">
<span class="fnc">field</span>(<span class="str">&quot;name&quot;</span>).<span class="fnc">ofType</span>(String.<span class="kwd">class</span>)
             .<span class="fnc">in</span>(person)
             .<span class="fnc">set</span>(<span class="str">&quot;Leia&quot;</span>);</pre>
        </p>
      </subsection>
    </section>
  </body>
</document>

